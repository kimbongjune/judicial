# 프로젝트 개요

## 1. 프로젝트 비전

**"법률 정보에 대한 접근성을 높이고, AI 기반 유사 판례 검색을 통해 누구나 쉽게 관련 법률 정보를 찾을 수 있는 오픈소스 법률 정보 검색 플랫폼"**

케이스노트(casenote.kr)와 유사한 서비스를 무료 오픈소스 기술 스택으로 구현하여, 개인 개발자나 스타트업도 법률 정보 서비스를 구축할 수 있는 기반을 마련합니다.

---

## 2. 프로젝트 목표

### 2.1 핵심 목표
- **판례 검색 서비스 구축**: 법제처 OpenAPI를 활용한 판례 데이터 수집 및 검색 기능 제공
- **AI 기반 유사 판례 검색**: Sentence Transformers를 활용한 의미론적 유사도 기반 판례 추천
- **자연어 검색 지원**: 법률 전문 용어 없이도 일상 언어로 관련 판례 검색 가능
- **무비용 운영**: 클라우드 서비스 없이 로컬/온프레미스 환경에서 운영 가능한 아키텍처

### 2.2 세부 목표
| 목표 | 설명 |
|------|------|
| 판례 데이터 ETL | 법제처 API로부터 판례 데이터 수집, 변환, 저장 |
| 키워드 검색 | 제목, 본문, 법원, 사건번호 등 필드별 검색 |
| 유사 판례 검색 | 입력 텍스트와 의미론적으로 유사한 판례 검색 |
| 판례 상세 조회 | 판례 본문, 판시사항, 판결요지 등 상세 정보 제공 |
| 헌재결정례 검색 | 헌법재판소 결정례 검색 및 조회 |
| 법령해석례 검색 | 법제처 법령해석례 검색 및 조회 |
| 북마크 기능 | 사용자별 판례 북마크 저장 |
| 검색 히스토리 | 검색 기록 저장 및 조회 |

---

## 3. 프로젝트 범위

### 3.1 포함 범위 (In-Scope)

#### 데이터 수집
- 대법원 판례 (법제처 OpenAPI)
- 헌법재판소 결정례
- 법령해석례
- 행정심판례
- 관련 법령 정보

#### 기능
- 판례 키워드 검색
- 판례 필터링 (법원, 사건유형, 기간 등)
- AI 유사 판례 추천
- 자연어 검색
- 판례 상세 조회
- 관련 법령 연계 조회
- SSR 기반 웹 인터페이스

#### 기술
- Python 기반 백엔드
- Sentence Transformers 임베딩
- FAISS 벡터 검색
- PostgreSQL 또는 SQLite 데이터베이스

### 3.2 제외 범위 (Out-of-Scope)

- 유료 클라우드 서비스 (AWS, GCP, Azure 등)
- Docker/Kubernetes 컨테이너 오케스트레이션
- Elasticsearch
- 실시간 판례 알림 서비스
- 사용자 간 커뮤니티 기능
- 법률 자문 서비스
- 판결문 원본 PDF 다운로드 (법제처 미제공)

---

## 4. 기술 스택

### 4.1 백엔드

| 기술 | 버전 | 용도 |
|------|------|------|
| Python | 3.10+ | 핵심 언어 |
| FastAPI | 0.100+ | 웹 프레임워크 |
| SQLAlchemy | 2.0+ | ORM |
| Pydantic | 2.0+ | 데이터 검증 |
| aiohttp | 3.9+ | 비동기 HTTP 클라이언트 (ETL용) |
| APScheduler | 3.10+ | 배치 작업 스케줄링 |

### 4.2 AI/ML

| 기술 | 버전 | 용도 |
|------|------|------|
| Sentence Transformers | 2.2+ | 텍스트 임베딩 |
| FAISS (faiss-cpu) | 1.7+ | 벡터 유사도 검색 |
| transformers | 4.30+ | 트랜스포머 모델 |
| torch | 2.0+ | 딥러닝 프레임워크 |

### 4.3 데이터베이스

| 기술 | 용도 |
|------|------|
| PostgreSQL 15+ | 메인 데이터베이스 |
| SQLite 3 | 경량 대안 (개발/테스트용) |

### 4.4 프론트엔드 (SSR)

| 기술 | 용도 |
|------|------|
| Jinja2 | 서버사이드 템플릿 렌더링 |
| TailwindCSS | CSS 프레임워크 |
| Alpine.js | 경량 JavaScript (탭 전환 등) |

### 4.5 개발 도구

| 기술 | 용도 |
|------|------|
| Poetry / pip | 패키지 관리 |
| Black | 코드 포매터 |
| Ruff | 린터 |
| pytest | 테스트 프레임워크 |
| pre-commit | Git 훅 관리 |

---

## 5. 사용 임베딩 모델

### 5.1 기본 모델

**`jhgan/ko-sroberta-multitask`**
- 한국어에 최적화된 Sentence-BERT 모델
- 768차원 벡터
- 무료 사용 가능 (Apache 2.0)

### 5.2 대안 모델

| 모델 | 특징 | 벡터 차원 |
|------|------|-----------|
| `BM-K/KoSimCSE-roberta-multitask` | 한국어 SimCSE | 768 |
| `snunlp/KR-SBERT-V40K-klueNLI-augSTS` | KLUE 기반 | 768 |
| `sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2` | 다국어 경량 모델 | 384 |

---

## 6. 참고 사이트 분석

### 6.1 케이스노트 (casenote.kr)

**주요 기능 분석:**
- 300만건 이상의 판결문 보유
- AI 유사 판례 추천
- 인용 판례 분석
- 판결 결과 및 인용 횟수 표시
- 판례 하이라이트 (중요 문장 표시)
- 북마크 기능
- 상세 필터 검색
- 주석서 연동 (프로 버전)

**UI/UX 특징:**
- 검색 중심의 메인 페이지
- 검색 결과 리스트 뷰
- 판례 상세 페이지에서 관련 정보 연계
- 3단 뷰 (목록 - 요약 - 상세)

### 6.2 벤치마킹 요소

| 기능 | 구현 여부 | 비고 |
|------|-----------|------|
| 판례 검색 | ✅ | 기본 기능 |
| AI 유사 판례 | ✅ | Sentence Transformers 활용 |
| 인용 판례 분석 | ⚠️ | 데이터 확보 시 구현 |
| 판결 결과 표시 | ✅ | 승소/패소 등 |
| 북마크 | ✅ | 로컬 저장 또는 DB |
| 주석서 연동 | ❌ | 저작권 이슈 |

---

## 7. 프로젝트 일정 (예상)

### Phase 1: 기반 구축 (2주)
- 프로젝트 설정 및 환경 구성
- 데이터베이스 스키마 설계
- 법제처 API 연동 모듈 개발
- 기본 ETL 파이프라인 구축

### Phase 2: 핵심 기능 개발 (3주)
- 판례 ETL 완성 및 데이터 수집
- 키워드 검색 API 개발
- 임베딩 파이프라인 구축
- FAISS 인덱스 생성

### Phase 3: AI 검색 및 UI (2주)
- 유사 판례 검색 API 개발
- 자연어 검색 기능 구현
- SSR 프론트엔드 개발
- 검색 결과 및 상세 페이지 UI

### Phase 4: 고도화 및 안정화 (1주)
- 성능 최적화
- 에러 처리 및 로깅
- 테스트 코드 작성
- 문서화

---

## 8. 디렉토리 구조 (예상)

```
judicial/
├── app/
│   ├── __init__.py
│   ├── main.py                 # FastAPI 앱 진입점
│   ├── config.py               # 설정 관리
│   ├── database.py             # DB 연결
│   │
│   ├── api/                    # API 라우터
│   │   ├── __init__.py
│   │   ├── cases.py            # 판례 API
│   │   ├── search.py           # 검색 API
│   │   └── similar.py          # 유사도 검색 API
│   │
│   ├── models/                 # SQLAlchemy 모델
│   │   ├── __init__.py
│   │   ├── case.py             # 판례 모델
│   │   ├── law.py              # 법령 모델
│   │   └── user.py             # 사용자 모델
│   │
│   ├── schemas/                # Pydantic 스키마
│   │   ├── __init__.py
│   │   ├── case.py
│   │   └── search.py
│   │
│   ├── services/               # 비즈니스 로직
│   │   ├── __init__.py
│   │   ├── case_service.py
│   │   ├── search_service.py
│   │   └── embedding_service.py
│   │
│   └── templates/              # Jinja2 템플릿
│       ├── base.html
│       ├── index.html
│       ├── search.html
│       └── case_detail.html
│
├── etl/                        # ETL 모듈
│   ├── __init__.py
│   ├── api_client.py           # 법제처 API 클라이언트
│   ├── extractors/             # 데이터 추출기
│   ├── transformers/           # 데이터 변환기
│   └── loaders/                # 데이터 적재기
│
├── ml/                         # ML 모듈
│   ├── __init__.py
│   ├── embedder.py             # 임베딩 생성
│   └── faiss_index.py          # FAISS 인덱스 관리
│
├── scripts/                    # 유틸리티 스크립트
│   ├── init_db.py
│   ├── run_etl.py
│   └── build_index.py
│
├── tests/                      # 테스트
│   ├── __init__.py
│   ├── test_api/
│   ├── test_etl/
│   └── test_ml/
│
├── data/                       # 데이터 디렉토리
│   ├── faiss_index/            # FAISS 인덱스 파일
│   └── cache/                  # API 캐시
│
├── docs/                       # 문서
│
├── pyproject.toml              # 프로젝트 설정
├── requirements.txt            # 의존성
├── .env.example                # 환경변수 예시
└── README.md
```

---

## 9. 리스크 및 대응 방안

| 리스크 | 영향도 | 대응 방안 |
|--------|--------|-----------|
| 법제처 API 장애 | 높음 | 로컬 캐싱, 재시도 로직 구현 |
| 대용량 데이터 처리 | 중간 | 배치 처리, 인덱싱 최적화 |
| 임베딩 모델 성능 | 중간 | 모델 비교 실험, 파인튜닝 고려 |
| 메모리 부족 | 중간 | 청크 단위 처리, FAISS IVF 인덱스 사용 |
| API 호출 제한 | 중간 | Rate limiting, 점진적 수집 |

---

## 10. 성공 기준

| 지표 | 목표치 |
|------|--------|
| 수집 판례 건수 | 10만건 이상 |
| 검색 응답 시간 | 500ms 이하 |
| 유사 판례 정확도 | 사용자 만족도 70% 이상 |
| 시스템 가동률 | 99% 이상 |
| 동시 접속자 | 100명 이상 처리 가능 |
